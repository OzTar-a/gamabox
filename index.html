<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥å…·ç®±</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            line-height: 1.6;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container { width: 90%; max-width: 1000px; margin: 0 auto; }

        header {
            background-color: #2c3e50;
            color: #fff;
            padding: 0; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        header .container {
            display: flex;
            flex-direction: column; 
            align-items: center;
        }

        .logo-area {
            padding: 1rem 0;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-tabs {
            display: flex;
            width: 100%;
            max-width: 600px;
            list-style: none;
            margin-bottom: -2px; 
        }

        .nav-tabs li {
            flex: 1;
            text-align: center;
        }

        .nav-tabs a {
            display: block;
            padding: 15px 0;
            color: #bdc3c7;
            text-decoration: none;
            font-weight: 600;
            border-bottom: 4px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav-tabs a:hover {
            color: #ecf0f1;
            background-color: rgba(255,255,255,0.05);
        }

        .nav-tabs a.active {
            color: #fff;
            border-bottom: 4px solid #e74c3c;
        }

        main { flex: 1; padding: 40px 0; }

        .tab-content { display: none; animation: fadeIn 0.3s ease-in-out; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .tool-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
            overflow: hidden;
            max-width: 600px;
            margin: 0 auto;
        }

        .card-header {
            background: #34495e;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
        .card-header h2 { margin: 0; font-size: 1.5rem; }
        .card-header p { opacity: 0.8; font-size: 0.9rem; margin-top: 5px; }

        .card-body { padding: 30px; }

        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: #2c3e50; font-size: 0.95rem; }
        .form-group input {
            width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0;
            border-radius: 8px; font-size: 1rem; outline: none; transition: border-color 0.3s;
        }
        .form-group input:focus { border-color: #3498db; }

        .row-group { display: flex; gap: 15px; }
        .row-group .form-group { flex: 1; margin-bottom: 0; }

        .result-box {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: #fff;
            padding: 25px;
            border-radius: 8px;
            margin-top: 30px;
            text-align: center;
        }
        .result-item {
            margin: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            padding-bottom: 10px;
        }
        .result-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        
        .result-label { font-size: 1.1rem; opacity: 0.9; }
        .result-value { font-size: 1.5rem; font-weight: bold; color: #f1c40f; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        
        .time-result { font-size: 1.8rem; color: #f1c40f; font-weight: bold; display: block; margin-top: 10px; }
        
        .sub-result-label { font-size: 0.95rem; opacity: 0.8; display: block; margin-bottom: 5px;}
        .sub-result-value { font-size: 1.2rem; color: #ecf0f1; font-weight: 600; }

        .note { font-size: 0.85rem; color: #7f8c8d; text-align: center; margin-top: 15px; }

        footer { background: #2c3e50; color: #bdc3c7; text-align: center; padding: 20px 0; font-size: 0.9rem; margin-top: auto; }

        @media (max-width: 600px) {
            .row-group { flex-direction: column; gap: 20px; }
            .card-body { padding: 20px; }
            .result-item { flex-direction: column; gap: 5px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <div class="logo-area"></div>
            <ul class="nav-tabs">
                <li><a class="active" onclick="switchTab('tab-star')">åŸåˆä¹‹æ˜Ÿ</a></li>
                <li><a onclick="switchTab('tab-exp')">ç¶“é©—è¨ˆç®—</a></li>
            </ul>
        </div>
    </header>

    <main>
        <div class="container">
            
            <div id="tab-star" class="tab-content active">
                <div class="tool-card">
                    <div class="card-header">
                        <h2>ğŸ† è³½å­£ç­‰ç´šè¨ˆç®—æ©Ÿ</h2>
                        <p>è¼¸å…¥è§’è‰²æ•¸æ“šï¼Œé æ¸¬åŸåˆä¹‹æ˜Ÿè©•åˆ†</p>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label>è§’è‰²ç­‰ç´š (Lv)</label>
                            <input type="number" id="charLevel" placeholder="100-120">
                        </div>
                        <div class="form-group row-group">
                            <div class="form-group">
                                <label>ç•¶å‰ç¶“é©—</label>
                                <input type="number" id="currentExp" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label>ç¶“é©—ä¸Šé™</label>
                                <input type="number" id="maxExp" placeholder="0">
                            </div>
                        </div>
                        <div class="form-group row-group">
                            <div class="form-group">
                                <label>æŠ€èƒ½å‡ç­‰</label>
                                <input type="number" id="avgSkill">
                            </div>
                            <div class="form-group">
                                <label>è£å‚™å‡ç­‰</label>
                                <input type="number" id="avgEquip">
                            </div>
                        </div>
                        <div class="form-group row-group">
                            <div class="form-group">
                                <label>å¹»ç¸å‡ç­‰</label>
                                <input type="number" id="avgPal">
                            </div>
                            <div class="form-group">
                                <label>éºç‰©å‡ç­‰</label>
                                <input type="number" id="avgRelic">
                            </div>
                        </div>

                        <div class="result-box">
                            <div class="result-item">
                                <span class="result-label">ç¸½åˆ†</span>
                                <span id="star-totalScore" class="result-value">0</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">åŸåˆä¹‹æ˜Ÿ</span>
                                <span id="star-final" class="result-value">10.00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tab-exp" class="tab-content">
                <div class="tool-card">
                    <div class="card-header">
                        <h2>â³ å‡ç´šæ™‚é–“è¨ˆç®—</h2>
                        <p>è¨ˆç®—æ›æ©Ÿæ‰€éœ€æ™‚é–“ï¼ŒåŒ…å«åŠ é€Ÿé“å…·æŠ˜æŠµ</p>
                    </div>
                    <div class="card-body">
                        <div class="form-group row-group">
                            <div class="form-group">
                                <label>ç¾åœ¨ç­‰ç´š</label>
                                <input type="number" id="exp-currentLv" placeholder="ä¾‹å¦‚ 100">
                            </div>
                            <div class="form-group">
                                <label>ç›®æ¨™ç­‰ç´š</label>
                                <input type="number" id="exp-targetLv" placeholder="ä¾‹å¦‚ 120">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>ç¾åœ¨å·²ç´¯ç©ç¶“é©—</label>
                            <input type="number" id="exp-currentExp" placeholder="0">
                        </div>

                        <div class="form-group">
                            <label>æ¯å°æ™‚ç¶“é©— (Exp/Hr)</label>
                            <input type="number" id="exp-perHour" placeholder="ä¾‹å¦‚ 350000">
                        </div>

                        <div class="form-group row-group">
                            <div class="form-group">
                                <label>å…è²»åŠ é€Ÿ (æ¬¡)</label>
                                <input type="number" id="exp-freeSpeedup" placeholder="æ¬¡æ•¸">
                            </div>
                            <div class="form-group">
                                <label>åŠ é€ŸçŸ³é ­ (é¡†)</label>
                                <input type="number" id="exp-stoneSpeedup" placeholder="æ¬¡æ•¸">
                            </div>
                        </div>
                        <p class="note" style="margin-bottom: 20px; text-align: left;">* è¨»ï¼šæ¯æ¬¡åŠ é€Ÿå‡ä»¥ 2 å°æ™‚ç¶“é©—è¨ˆç®—</p>

                        <div class="result-box">
                            <div style="margin-bottom: 20px;">
                                <span class="result-label">é è¨ˆæ‰€éœ€æ™‚é–“ (å«åŠ é€Ÿ)</span>
                                <span id="exp-timeResult" class="time-result">0å¤© 0å°æ™‚ 0åˆ†</span>
                            </div>
                            <div style="border-top: 1px solid rgba(255,255,255,0.3); padding-top: 15px;">
                                <span class="sub-result-label">è‹¥å®Œå…¨ä¸ä½¿ç”¨åŠ é€Ÿé“å…·</span>
                                <span id="exp-timeResult-original" class="sub-result-value">0å¤© 0å°æ™‚ 0åˆ†</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <footer>
        <p>&copy; 2024 GameGuide. æ•¸æ“šèˆ‡åœ–ç‰‡åƒ…ä¾›åƒè€ƒ.</p>
    </footer>

    <script>
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-tabs a').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        const starInputs = ['charLevel', 'currentExp', 'maxExp', 'avgSkill', 'avgEquip', 'avgPal', 'avgRelic'];
        starInputs.forEach(id => {
            const el = document.getElementById(id);
            if(el) el.addEventListener('input', calculateStar);
        });

        function calculateStar() {
            const getVal = (id) => {
                const el = document.getElementById(id);
                return el.value === "" ? null : Number(el.value);
            };

            const charLevel = getVal('charLevel');
            const currentExp = Number(document.getElementById('currentExp').value) || 0;
            const maxExp = Number(document.getElementById('maxExp').value) || 0;
            const avgSkill = getVal('avgSkill');
            const avgEquip = getVal('avgEquip');
            const avgPal = getVal('avgPal');
            const avgRelic = getVal('avgRelic');

            let scoreLevel = (charLevel === null) ? 0 : (charLevel - 100) * 100;
            let scoreExp = (maxExp !== 0) ? Math.round((currentExp / maxExp) * 100) : 0;
            let scoreSkill = (avgSkill === null) ? 0 : (avgSkill - 100) * 104;
            let scoreEquip = (avgEquip === null) ? 0 : (avgEquip - 100) * 190;
            let scorePal = (avgPal === null) ? 0 : (avgPal - 100) * 56;
            let scoreRelic = (avgRelic === null) ? 0 : (avgRelic - 10) * 1140;

            const total = scoreLevel + scoreExp + scoreSkill + scoreEquip + scorePal + scoreRelic;
            const stars = 10 + (total / 100);

            document.getElementById('star-totalScore').textContent = new Intl.NumberFormat().format(total);
            document.getElementById('star-final').textContent = stars.toFixed(2);
        }
        
        // ç¶“é©—è¡¨æ•¸æ“š (Level 100 - 124+)
        const expTable = {
            100: 886086,
            101: 888547,
            102: 926501,
            103: 964086,
            104: 1012164,
            105: 1054111,
            106: 1096529,
            107: 1135645,
            108: 1174997,
            109: 1214584,
            110: 1258533,
            111: 1303677,
            112: 1348574,
            113: 1393941,
            114: 1439780,
            115: 1486091,
            116: 1532872,
            117: 1580125,
            118: 1627849,
            119: 1676044,
            120: 1730017,
            121: 1783360,
            MAX_VAL: 1833196 
        };

        function getExpForLevel(lvl) {
            if (lvl < 100) return 0; 
            if (lvl >= 122) return expTable.MAX_VAL;
            return expTable[lvl] || expTable.MAX_VAL;
        }

        const expInputs = ['exp-currentLv', 'exp-targetLv', 'exp-currentExp', 'exp-perHour', 'exp-freeSpeedup', 'exp-stoneSpeedup'];
        expInputs.forEach(id => {
            const el = document.getElementById(id);
            if(el) el.addEventListener('input', calculateTime);
        });
        
        function formatTime(totalHours) {
            if (totalHours <= 0) return "0åˆ†";
            
            const days = Math.floor(totalHours / 24);
            const remainingHours = Math.floor(totalHours % 24);
            const minutes = Math.round((totalHours * 60) % 60);

            let timeString = "";
            if (days > 0) timeString += `${days}å¤© `;
            if (remainingHours > 0 || days > 0) timeString += `${remainingHours}å°æ™‚ `;
            timeString += `${minutes}åˆ†`;
            return timeString;
        }

        function calculateTime() {
            const currentLv = Number(document.getElementById('exp-currentLv').value);
            const targetLv = Number(document.getElementById('exp-targetLv').value);
            const currentExp = Number(document.getElementById('exp-currentExp').value) || 0;
            const expPerHour = Number(document.getElementById('exp-perHour').value) || 0;
            const freeSpeedup = Number(document.getElementById('exp-freeSpeedup').value) || 0;
            const stoneSpeedup = Number(document.getElementById('exp-stoneSpeedup').value) || 0;

            // åŸºæœ¬é˜²å‘†
            if (!currentLv || !targetLv || currentLv >= targetLv) {
                document.getElementById('exp-timeResult').textContent = "è«‹è¼¸å…¥æ­£ç¢ºç­‰ç´šç¯„åœ";
                document.getElementById('exp-timeResult-original').textContent = "--";
                return;
            }

            let totalNeeded = 0;
            for (let lv = currentLv; lv < targetLv; lv++) {
                totalNeeded += getExpForLevel(lv);
            }

            let baseRemainingNeeded = totalNeeded - currentExp;

            if (baseRemainingNeeded <= 0) {
                document.getElementById('exp-timeResult').textContent = "å·²é”æˆç›®æ¨™ï¼";
                document.getElementById('exp-timeResult-original').textContent = "å·²é”æˆç›®æ¨™ï¼";
                return;
            }

            if (expPerHour <= 0) {
                document.getElementById('exp-timeResult').textContent = "è«‹è¼¸å…¥æ¯å°æ™‚ç¶“é©—";
                document.getElementById('exp-timeResult-original').textContent = "è«‹è¼¸å…¥æ¯å°æ™‚ç¶“é©—";
                return;
            }

            const baseHoursNeeded = baseRemainingNeeded / expPerHour;
            document.getElementById('exp-timeResult-original').textContent = formatTime(baseHoursNeeded);


            const speedupHours = (freeSpeedup + stoneSpeedup) * 2;
            const speedupExp = speedupHours * expPerHour;
            
            let actualRemainingNeeded = baseRemainingNeeded - speedupExp;

            if (actualRemainingNeeded <= 0) {
                document.getElementById('exp-timeResult').textContent = "åŠ é€Ÿå¾Œå¯ç«‹å³é”æˆï¼";
                return;
            }

            const actualHoursNeeded = actualRemainingNeeded / expPerHour;
            document.getElementById('exp-timeResult').textContent = formatTime(actualHoursNeeded);
        }
    </script>
</body>
</html>
